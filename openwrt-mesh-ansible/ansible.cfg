[defaults]
# Default inventory (production nodes at 10.11.12.x with openssh)
# For initial setup, override with: -i inventory/hosts-initial.yml
inventory = inventory/hosts.yml

# SSH host key checking disabled (dropbear and openssh have different keys)
host_key_checking = False

retry_files_enabled = False
display_skipped_hosts = False
stdout_callback = default
result_format = yaml
bin_ansible_callbacks = True

# Logging configuration
# All playbook runs are logged to this file for debugging
log_path = /home/m/repos/mesh/openwrt-mesh-ansible/logs/ansible.log
display_args_to_stdout = True
log_filter = []

# Timeout settings (useful for slow dropbear connections)
timeout = 30
command_timeout = 30

[ssh_connection]
# SSH connection options
# - ControlMaster: Reuse SSH connections for better performance
# - ControlPersist: Keep connections alive for 60s
# - StrictHostKeyChecking=no: Accept both dropbear and openssh keys
# - UserKnownHostsFile=/dev/null: Don't save keys (they change during deployment)
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

# Pipelining improves performance but works with both dropbear and openssh
pipelining = True

# Connection timeout (adjust if dropbear is slow)
connect_timeout = 30
